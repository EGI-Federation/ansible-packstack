---
- hosts: all
  become: yes
  become_method: sudo
  tasks:
    - name: Disable firewalld
      systemd: name=firewalld enabled=no state=stopped

    - name: Disable NetworkManager
      systemd: name=NetworkManager enabled=no state=stopped

    - name: Enable network
      systemd: name=network enabled=yes state=started

    - name: Install OpenStack {{ os_release }} repository
      yum: name=centos-release-openstack-{{ os_release }} state=installed

    - name: install updates
      yum: name=* state=latest update_cache=yes

    - name: Install packstack installer
      yum: name=openstack-packstack state=installed

#    - name: Execute packstck installer
      # command: packstack --allinone
      # args:
      #   creates:
